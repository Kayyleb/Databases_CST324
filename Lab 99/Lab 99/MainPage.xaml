<Page
    x:Class="Lab_99.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Lab_99"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid Background="Yellow">
        <StackPanel>
            <StackPanel Orientation="Horizontal" Margin="8">

                <!-- Entree panel -->
                <StackPanel x:Name="Entree" Width="260" Margin="4">
                    <TextBlock Text="Entree"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="Black"
                               Margin="0,0,0,8"/>
                </StackPanel>

                <!-- Side panel -->
                <StackPanel x:Name="Side" Width="260" Margin="4">
                    <TextBlock Text="Side"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="Black"
                               Margin="0,0,0,8"/>
                </StackPanel>

                <!-- Student ID & Buy panel -->
                <StackPanel Width="200" Margin="4">
                    <TextBlock Text="Student #"
                               Margin="0,0,0,4"
                               Foreground="Black"/>

                    <!-- Helps enforce numeric input on mobile; fine on desktop too -->
                    <TextBox x:Name="StudentIdBox"
                             Width="150"
                             Margin="0,0,0,8"
                             Foreground="Black"
                             InputScope="Number"/>

                    <!-- IMPORTANT: wire up Click -->
                    <Button x:Name="BuyButton"
                            Content="Buy"
                            Width="100"
                            Foreground="Black"
                            Click="BuyButton_Click"/>

                    <!-- Optional: show messages like "Purchased!" or errors -->
                    <TextBlock x:Name="StatusText"
                               Margin="0,8,0,0"
                               Foreground="Black"
                               TextWrapping="Wrap"/>
                </StackPanel>
            </StackPanel>

            <!-- Product grid below ticket bar -->
            <GridView x:Name="DisplayGrid"
                      SelectionMode="Single"
                      SelectionChanged="SelectProduct">
                <GridView.ItemTemplate>
                    <DataTemplate x:DataType="local:Product">
                        <StackPanel Width="220" Margin="8">
                            <Image Source="{x:Bind ImageSrc}"
                                   Width="200"
                                   Height="200"
                                   Stretch="UniformToFill"
                                   Margin="0,0,0,8"/>

                            <TextBlock Text="{x:Bind Name}"
                                       FontSize="20"
                                       FontWeight="SemiBold"
                                       Foreground="Black"
                                       Margin="0,0,0,4"/>

                            <!-- CHANGED: Show inventory count instead of Brand -->
                            <TextBlock Text="{x:Bind inventoryCount}"
                                       FontSize="16"
                                       Foreground="Black"
                                       Margin="0,0,0,4"/>

                            <TextBlock Text="{x:Bind Desc}"
                                       TextWrapping="Wrap"
                                       FontSize="14"
                                       Foreground="Black"
                                       Margin="0,0,0,4"/>

                            <TextBlock Text="{x:Bind DisplayPrice}"
                                       FontSize="18"
                                       FontWeight="Bold"
                                       Foreground="Black"
                                       Margin="0,4,0,0"/>
                        </StackPanel>
                    </DataTemplate>
                </GridView.ItemTemplate>
            </GridView>
        </StackPanel>
    </Grid>
</Page>
